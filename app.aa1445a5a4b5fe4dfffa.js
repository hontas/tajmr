(()=>{var e,t,r,n={7408:(e,t,r)=>{"use strict";var n=r(7294),a=r(3935),i=r(1512),s=r(7923),o=r(3379),l=r.n(o),c=r(3793),u={insert:"head",singleton:!1};l()(c.Z,u);c.Z.locals;var d=r(4429),p=r(4890),m=r(3894),g=r(8593);const f="USER_LOGGED_IN",b="USER_LOGGED_OUT";function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y="USER_UPDATE_SETTINGS";function w(e){return{type:y,settings:e}}const k={updatedAt:0,displayMonthReport:!1,displayNotifications:!1,displayPreviousIntervals:!1,displayName:"",hoursInWeek:40};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const D={initialized:!1},P="firebase/INITIALIZED";const j=(0,p.UY)({userSettings:function(e=k,t){switch(t.type){case y:return v(v(v({},e),t.settings),{},{updatedAt:Date.now()});case b:return v(v({},k),{},{updatedAt:Date.now()});default:return e}},intervals:g.default,version:function(e=null){return e},user:function(e=null,t){switch(t.type){case f:return t.user;case b:return null;default:return e}},app:function(e=D,t){switch(t.type){case P:return x(x({},e),{},{initialized:!0});default:return e}}}),T=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.qC)((0,p.md)(m.Z));var S=r(5697),N=r.n(S),A=r(4184),R=r.n(A),I=r(5615),U=r(2690),C={insert:"head",singleton:!1};l()(U.Z,C);U.Z.locals;const L=({className:e,active:t})=>n.createElement("div",{className:R()("hamburger",{"hamburger--active":t},e)});L.propTypes={className:N().string,active:N().bool};const M=L;var z=r(2568),F=r.n(z),Z=r(1657);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class q extends n.Component{constructor(...e){super(...e),V(this,"state",{isSavingUserSettings:!1,isSavingUserPassword:!1,updatePasswordError:null,updatePasswordSuccess:!1}),V(this,"preventDefault",(e=>{"keydown"===e.type&&"Enter"!==e.key||e.preventDefault()})),V(this,"updateUserPassword",(e=>{e.preventDefault();const t=this.oldPass.value,r=this.newPass.value;this.setState({isSavingUserPassword:!0});const n=({message:e})=>this.setState({isSavingUserPassword:!1,updatePasswordError:e,updatePasswordSuccess:!e});d.Z.updateUserPassword(t,r).then((()=>{n({message:""}),setTimeout((()=>this.setState({updatePasswordSuccess:!1})),2e3),this.oldPass.value="",this.newPass.value=""})).catch(n)})),V(this,"saveUserSettings",(e=>{e.preventDefault();const{user:t,userSettings:r}=this.props;this.setState({isSavingUserSettings:!0}),d.Z.saveUserData(t.uid,r).then((()=>{this.setState({isSavingUserSettings:!1})}))}))}render(){const{userSettings:e,user:t,className:r}=this.props,{displayMonthReport:a,displayNotifications:i,displayPreviousIntervals:s,hoursInWeek:o}=e,{isSavingUserSettings:l,isSavingUserPassword:c,updatePasswordError:u,updatePasswordSuccess:p}=this.state,m=t&&(t.photoURL||`https://www.gravatar.com/avatar/${F()(t.email)}`);return n.createElement("form",{"data-testid":"user-menu",className:R()("pure-form pure-form-stacked user-menu",r),onSubmit:this.preventDefault},n.createElement("div",{className:"user-menu__row"},n.createElement("img",{alt:"avatar",className:"profile-image",src:m}),n.createElement(I.Z,{className:"user-menu__log-out",theme:"link",onClick:d.Z.logout},"Logga ut")),n.createElement("fieldset",{className:"user-menu__fieldset"},n.createElement("label",{className:"user-menu__label"},"Visa notifiering",n.createElement("input",{checked:i,onChange:this.handleChange("displayNotifications"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Visa tidigare intervall",n.createElement("input",{checked:s,onChange:this.handleChange("displayPreviousIntervals"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Visa månadsrapport",n.createElement("input",{checked:a,onChange:this.handleChange("displayMonthReport"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Full arbetsvecka (h)",n.createElement("input",{value:o,onChange:this.handleChange("hoursInWeek",Number),style:{float:"right",width:"100px"},type:"number"}))),n.createElement(I.Z,{className:"pure-button-primary",isLoading:l,onClick:this.saveUserSettings,text:"Spara inställningar"}),n.createElement("fieldset",{className:"user-menu__fieldset"},u&&n.createElement("p",{style:{whiteSpace:"normal"}},u),n.createElement("div",{className:"user-menu__change-pass"},n.createElement("label",{htmlFor:"oldPassword",className:"user-menu__change-pass__label"},n.createElement("input",{onKeyDown:this.preventDefault,autoComplete:"old-password",className:"user-menu__change-pass__input",ref:e=>{this.oldPass=e},type:"password",placeholder:"Nuvarande lösenord",id:"oldPassword"})),n.createElement("label",{htmlFor:"newPassword",className:"user-menu__change-pass__label"},n.createElement("input",{onKeyDown:this.preventDefault,autoComplete:"new-password",className:"user-menu__change-pass__input",ref:e=>{this.newPass=e},type:"password",placeholder:"Nytt lösenord",id:"newPassword"})),n.createElement(I.Z,{theme:p?"success":"default",className:"user-menu__change-pass__btn pure-button-primary",isLoading:c,onClick:this.updateUserPassword,text:p?"👍":"Ändra"}))))}handleChange(e,t=(e=>e)){const{updateSettings:r}=this.props;return({target:n})=>{const a="checkbox"===n.type?n.checked:t(n.value);r(e,a)}}}q.propTypes={className:N().string,updateSettings:N().func.isRequired,user:N().shape({uid:N().string.isRequired,photoURL:N().string,email:N().string.isRequired}),userSettings:Z.AQ.isRequired};const W=q;var $=r(1733);function Q({user:e,isSaving:t,isFetching:r,appInitialized:a,userSettings:i,dispatch:s}){const[o,l]=n.useState(0),[c,u]=n.useState(!1),[d,p]=n.useState(window.innerWidth),m=n.useRef(null),g=a&&(t||r),f=n.useRef(),b=n.useRef();n.useEffect((()=>{const e=((e,t=400,r)=>{let n;return(...a)=>{const i=r||void 0;n&&(n=clearTimeout(n)),n=setTimeout((()=>{e.apply(i,a)}),t)}})((()=>p(window.innerWidth)));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),n.useEffect((()=>{const{right:e}=m.current?.getBoundingClientRect();l(d-e)}),[m,d]);const h=()=>{c?(document.body.style.overflow="",f.current.focus()):(document.body.style.overflow="hidden",b.current.focus()),u(!c)};return n.createElement("nav",{className:"navbar pure-menu pure-menu-horizontal pure-menu-fixed",style:{"--user-menu-right-pos":`${o}px`}},n.createElement("div",{className:"navbar__inner",ref:m},n.createElement("h1",{className:"brand pure-menu-heading"},"TajmR"),n.createElement("span",{className:"version"},n.createElement("small",null,"build time: 8 apr. 2021 22:08")),g&&n.createElement("div",{"data-testid":r?"loading-intervals-container":"saving-intervals-container",className:"loading-container"},n.createElement($.iC,{color:"currentColor"}),n.createElement("small",{className:"loading-text"},r?"Laddar intervall...":"Sparar...")),e&&n.createElement(n.Fragment,null,n.createElement(I.Z,{ref:f,className:"navbar__menu-btn","data-testid":"user-menu-toggle",onClick:h},n.createElement(M,{active:c})),n.createElement("button",{ref:b,className:R()("navbar__user-menu-backdrop",{"navbar__user-menu-backdrop--active":c}),onClick:h,title:"Close user menu","aria-label":"Close user menu"}),n.createElement(W,{user:e,userSettings:i,updateSettings:(e,t)=>{s(w({[e]:t}))},className:R()("navbar__user-menu",{"navbar__user-menu--active":c})}))))}Q.propTypes={dispatch:N().func.isRequired,isFetching:N().bool.isRequired,isSaving:N().bool.isRequired,appInitialized:N().bool.isRequired,userSettings:Z.AQ.isRequired,user:N().shape({uid:N().string.isRequired})};const B=(0,i.$j)((function({intervals:e,userSettings:t,user:r,app:n}){return{user:r,isFetching:e.isFetching,isSaving:e.isSaving,userSettings:t,appInitialized:n.initialized}}))(Q),H=()=>{const[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!1);function i(e){e.preventDefault(),t(e)}return(0,n.useEffect)((()=>(window.addEventListener("beforeinstallprompt",i),()=>window.removeEventListener("beforeinstallprompt",i))),[]),n.createElement("footer",{className:"footer"},n.createElement("span",null,"Built with",n.createElement("span",{role:"img","aria-label":"heart"}," ❤ "),"by"," ",n.createElement("a",{className:"animated",href:"https://github.com/hontas"},"hontas")),e&&n.createElement(I.Z,{theme:"primary",isLoading:r,onClick:async()=>{if(!e)return;a(!0),e.prompt();const{outcome:r}=await e.userChoice;"accepted"===r&&t(null),a(!1)}},r?"Installing PWA":"Install PWA"),n.createElement("a",{className:"animated",href:"https://github.com/hontas/tajmr.git"},"GitHub"))},G=n.lazy((()=>Promise.all([r.e(991),r.e(830)]).then(r.bind(r,2830)))),K=n.lazy((()=>Promise.all([r.e(991),r.e(287)]).then(r.bind(r,5624)))),X=n.lazy((()=>r.e(672).then(r.bind(r,5672))));function Y({initialized:e,user:t}){return n.createElement("div",{className:"application"},n.createElement(B,null),n.createElement("main",{className:"main"},e&&n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading...")},t?n.createElement(n.Fragment,null,n.createElement(G,null),n.createElement(K,null)):n.createElement(X,null)),!e&&n.createElement("div",{className:"application__init","data-testid":"app-init"},n.createElement($.iC,{color:"rgba(255,255,255,.75)",size:"50px"}))),n.createElement(H,null))}Y.propTypes={user:N().shape({uid:N().string.isRequired}),initialized:N().bool.isRequired};const J=(0,i.$j)((({user:e,app:t})=>({user:e,initialized:t.initialized})))(Y);r(5855);s.S({dsn:"https://a359f82382f84f2d85c9a876827f8e1a@sentry.io/1836574",release:"tajmr@1.0.1"});const ee=function(e={}){return(0,p.MT)(j,e,T)}();d.Z.subscribe((e=>ee.dispatch(e))),d.Z.init({intervalAdded:g.intervalAdded,intervalRemoved:g.intervalRemoved,intervalUpdated:g.intervalUpdated}),d.Z.auth.onAuthStateChanged((e=>{ee.dispatch({type:P}),e?(ee.dispatch((e=>({type:f,user:e}))(e)),ee.dispatch((0,g.fetchIntervalsForUser)()),d.Z.getUserSettings(e).then((e=>ee.dispatch(w(e.val()))))):(ee.dispatch({type:b}),ee.dispatch((0,g.reset)()))}));const te=()=>n.createElement(i.zt,{store:ee},n.createElement(J,null));a.render(n.createElement(te,null),document.getElementById("root"))},5615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(7294),a=r(5697),i=r.n(a),s=r(4184),o=r.n(s),l=r(1733);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const d=n.forwardRef(((e,t)=>{let{className:r,text:a,isLoading:i,disabled:s,children:d,type:p="button",theme:m="default"}=e,g=u(e,["className","text","isLoading","disabled","children","type","theme"]);const f=o()("pure-button button",`button--${m}`,r);return n.createElement("button",c({ref:t},g,{className:f,type:p,disabled:s}),a,d,i&&n.createElement(l.sm,{size:"15px"}))}));d.defaultProps={text:null,children:null,isLoading:!1},d.propTypes={className:i().string,isLoading:i().bool,disabled:i().bool,onClick:i().func.isRequired,text:i().string,type:i().oneOf(["button","submit"]),theme:i().oneOf(["default","primary","secondary","danger","success","link"]),children:i().oneOfType([i().string,i().element,i().arrayOf(i().element)])};const p=d},1733:(e,t,r)=>{"use strict";r.d(t,{iC:()=>s,sm:()=>o});var n=r(7294),a=r(5697),i=r.n(a);r(2846);function s({className:e="",color:t="currentColor",size:r="1em"}){return n.createElement("div",{className:`sk-wave ${e}`,style:{"--sk-color":t,"--sk-size":r}},n.createElement("div",{className:"sk-wave-rect"}),n.createElement("div",{className:"sk-wave-rect"}),n.createElement("div",{className:"sk-wave-rect"}),n.createElement("div",{className:"sk-wave-rect"}),n.createElement("div",{className:"sk-wave-rect"}))}function o({className:e="",color:t="currentColor",size:r="1em"}){return n.createElement("div",{className:`sk-bounce ${e}`,style:{"--sk-color":t,"--sk-size":r}},n.createElement("div",{className:"sk-bounce-dot"}),n.createElement("div",{className:"sk-bounce-dot"}))}const l={className:i().string,color:i().string,size:i().string};s.propTypes=l,o.propTypes=l},1657:(e,t,r)=>{"use strict";r.d(t,{FG:()=>i,FC:()=>s,AQ:()=>o,ZP:()=>a.a});var n=r(5697),a=r.n(n);const i=a().shape({id:a().string,startTime:a().number.isRequired,endTime:a().number,user:a().string,note:a().string}),s=a().arrayOf(i),o=(a().oneOfType([a().element,a().arrayOf(a().element)]),a().shape({displayNotifications:a().bool.isRequired,displayPreviousIntervals:a().bool.isRequired,displayName:a().string,hoursInWeek:a().number.isRequired}))},8593:(e,t,r)=>{"use strict";r.r(t),r.d(t,{INTERVAL_ADD:()=>c,INTERVAL_UPDATED:()=>u,INTERVAL_UPDATE_FAILED:()=>d,INTERVAL_COMPLETE:()=>p,INTERVAL_REMOVE:()=>m,INTERVALS_REQUEST:()=>g,INTERVALS_FETCHED:()=>f,INTERVALS_UPDATE_TIMESTAMP:()=>b,REQUEST_INTERVAL_UPDATE:()=>h,intervalAdded:()=>E,reset:()=>x,requestIntervals:()=>O,requestIntervalUpdate:()=>D,intervalUpdated:()=>P,intervalsFetched:()=>j,updateTimestamp:()=>T,intervalUpdateFailed:()=>S,intervalRemoved:()=>N,attemptRemove:()=>A,attemptUpdate:()=>R,fetchIntervalsForUser:()=>I,default:()=>L});var n=r(5096),a=r.n(n),i=r(4429);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c="INTERVAL_ADD",u="INTERVAL_UPDATED",d="INTERVAL_UPDATE_FAILED",p="INTERVAL_COMPLETE",m="INTERVAL_REMOVE",g="INTERVALS_REQUEST",f="INTERVALS_FETCHED",b="INTERVALS_UPDATE_TIMESTAMP",h="REQUEST_INTERVAL_UPDATE",v="INTERVAL RESET_STATE",_=new(a()),y=e=>t=>{if(!e(t))return console.log("interval validation failed for",t,e.errors),e.errors},w=y(_.compile({type:"object",properties:{createdAt:{type:"integer"},updatedAt:{type:"integer"},startTime:{type:"integer"},endTime:{type:"integer"},notWork:{type:"boolean"},note:{type:"string"},user:{type:"string"},id:{type:"string"}},required:["createdAt","startTime","user"],additionalProperties:!1})),k=y(_.compile({type:"object",properties:{startTime:{type:"integer"}},required:["startTime"],additionalProperties:!1}));function E(e){return{type:c,interval:e}}function x(){return{type:v}}function O(){return{type:g}}function D(){return{type:h}}function P(e){return{type:u,interval:e}}function j(e){return{type:f,intervals:e}}function T(e){return{type:b,timestamp:e}}function S(e){return{type:d,error:e}}function N(e){return{type:m,id:e}}const A=e=>t=>{t(D()),i.Z.removeInterval(e).then((()=>t(N(e)))).catch((r=>t(S(`Could not remove interval with id: ${e}. ${r}`))))};function R(e){return t=>{const r=e=>t(P(e)),n=e=>t(S(e));if(t(D()),!e.id){const t=k(e);return t?Promise.resolve(n(t)):i.Z.createInterval(e).then(r).catch(n)}const a=w(e);return a?Promise.resolve(n(a)):i.Z.updateInterval(e).then(r).catch(n)}}function I(){return e=>(e(O()),i.Z.fetchIntervalsForUser().then(U).then((({intervals:t})=>e(j(t)))).catch((t=>{console.log("[fetchIntervalsForUser]",t),e(j({}))})))}function U(e){const t={},r={};return Object.keys(e).forEach((n=>{const a=e[n],i=w(a);i?(console.log("Invalid interval",a,i),t[n]=a):r[n]=a})),{intervals:r,damagedIntervals:t}}const C={timestamp:Date.now(),updatedAt:0,isFetching:!0,isSaving:!1,items:[]};function L(e=C,t){switch(t.type){case v:return o(o({},e),{},{updatedAt:Date.now(),isFetching:!1,items:[]});case b:return o(o({},e),{},{timestamp:t.timestamp});case g:return o(o({},e),{},{updatedAt:Date.now(),isFetching:!0});case f:return o(o({},e),{},{isFetching:!1,updatedAt:Date.now(),items:Object.keys(t.intervals).map((e=>o(o({},t.intervals[e]),{},{id:e})))});case h:return o(o({},e),{},{updatedAt:Date.now(),isSaving:!0});case c:return o(o({},e),{},{updatedAt:Date.now(),isSaving:!1,items:[...e.items,t.interval]});case u:case p:{const r=e.items.filter((({id:e})=>t.interval.id!==e));return r.push(t.interval),o(o({},e),{},{updatedAt:Date.now(),isSaving:!1,items:r})}case d:return o(o({},e),{},{updatedAt:Date.now(),error:t.error,isSaving:!1});case m:return o(o({},e),{},{updatedAt:Date.now(),isSaving:!1,items:e.items.filter((({id:e})=>t.id!==e))});default:return e}}},5855:()=>{"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("service-worker.js").then((e=>{e.onupdatefound=function(){const t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":navigator.serviceWorker.controller?console.log("New or updated content is available."):console.log("Content is now available offline!");break;case"redundant":console.error("The installing service worker became redundant.");break;default:console.log(`Unhandled worker state: ${t.state}`)}}}})).catch((e=>{console.error("Error during service worker registration:",e)}))}))},4429:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(5503),a=(r(7397),r(4642),r(9859));function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.Z.initializeApp({apiKey:"AIzaSyDXVqvULyVze_vLoV6QFTsqwirITCj3Ai8",authDomain:"tajmr.firebaseapp.com",databaseURL:"https://tajmr.firebaseio.com",projectId:"firebase-tajmr",storageBucket:"firebase-tajmr.appspot.com",messagingSenderId:"784102119013"});const c=n.Z.database(),u=n.Z.auth(),d=[],p={auth:u,subscribe(e){d.push(e)},emit(e){d.forEach((t=>t(e)))},login:(e,t)=>Promise.resolve(u.signInWithEmailAndPassword(e,t)),sendPasswordResetEmail:e=>Promise.resolve(u.sendPasswordResetEmail(e)),logout:()=>Promise.resolve(u.signOut()),ref:n.Z,intervals:c.ref().child("intervals"),createInterval(e){const t=c.ref().child("intervals").push().key,r=p.getCurrentUserId();return p.updateInterval(o(o({},e),{},{id:t,user:r,createdAt:Date.now()}))},updateInterval(e){let{id:t}=e,r=i(e,["id"]);return c.ref(`intervals/${t}`).set(o(o({},r),{},{updatedAt:Date.now()})).then((()=>o(o({},r),{},{id:t})))},removeInterval:e=>c.ref(`intervals/${e}`).remove(),fetchIntervalsInWeek(e=Date.now()){const{startTime:t,endTime:r}=(0,a.Qk)(e);return p.intervals.orderByChild("startTime").startAt(t).endAt(r).once("value").then((e=>e.val())).then(m)},fetchIntervalsForUser:()=>p.intervals.orderByChild("startTime").once("value").then((e=>e.val())).then(m),getCurrentUserId:()=>u.currentUser&&u.currentUser.uid,getUserSettings:e=>c.ref(`users/${e.uid}`).once("value"),updateUserPassword(e,t){const r=n.Z.auth.EmailAuthProvider.credential(u.currentUser.email,e);return u.currentUser.reauthenticateWithCredential(r).then((()=>u.currentUser.updatePassword(t)))},saveUserData:(e,t)=>c.ref(`users/${e}`).set(t),init({intervalAdded:e,intervalRemoved:t,intervalUpdated:r}){p.intervals.orderByChild("startTime").startAt(Date.now()).on("child_added",(t=>{const r=t.val(),n=u.currentUser&&u.currentUser.uid;if(console.log("child_added!!!!",r),r.user!==n)return;const a=t.key;p.emit(e(o(o({},r),{},{id:a})))})),p.intervals.on("child_changed",(e=>{const t=e.val(),n=e.key;console.log("child_changed",t,n),p.emit(r(o(o({},t),{},{id:n})))})),p.intervals.on("child_removed",(e=>{const r=e.key;console.log("child_removed",r),p.emit(t(r))}))}};function m(e){const t=u.currentUser&&u.currentUser.uid;return Object.keys(e).reduce(((r,n)=>e[n].user===t?o({[n]:e[n]},r):r),{})}const g=p},9859:(e,t,r)=>{"use strict";r.d(t,{e7:()=>n,ml:()=>i,un:()=>o,u6:()=>u,FO:()=>d,_3:()=>p,pD:()=>m,PE:()=>g,Qk:()=>f,BN:()=>b,jw:()=>h,l5:()=>v,uW:()=>_,Ds:()=>y,b7:()=>w});const n=["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],a=["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag","söndag"],i=36e5,s=24*i,o=7*s,l="sv-SE",c={durationOffset:i,time:new Intl.DateTimeFormat(l,{hour:"2-digit",minute:"2-digit"}),weekDay:new Intl.DateTimeFormat(l,{weekday:"short"}),date:new Intl.DateTimeFormat(l,{month:"numeric",day:"numeric"})};function u(e,t={}){const{isDuration:r}=t,n=r?e-c.durationOffset:e;return c.time.format(n)}function d(e){return c.weekDay.format(e)}function p(e){return c.date.format(e)}function m(e){return e/i}function g(e){return{startTime:+w(e),endTime:+k(e)}}function f(e){const t=new Date(e),r=t.getDay()||7;t.setDate(t.getDate()-r+1),t.setHours(0),t.setMinutes(0);return{startTime:+t,endTime:+t+7*s}}function b(e=Date.now()){const t=new Date(e),r=t.getDate(),n=t.getDay();t.setDate(n?r-(n-1):r-6);const i=t.getTime();return a.slice(1,8).map(((e,t)=>({isWeekEnd:t>4,weekday:e,date:p(new Date(i+s*t))})))}function h(e){const t=new Date(e);t.setDate(1),t.setHours(0),t.setMinutes(0);const r=new Date(e);return r.setHours(23),r.setMinutes(59),r.setMonth(r.getMonth()+1),r.setDate(0),{startTime:+t,endTime:+r}}function v({startTime:e,endTime:t}){const r=new Date(e),n=new Date(t),a=r.getDay(),i=n.getDay();0===a&&r.setDate(r.getDate()+1),6===a&&r.setDate(r.getDate()+2),0===i&&n.setDate(n.getDate()-2),6===i&&n.setDate(n.getDate()-1);const s=n.getDate()-(r.getDate()-1);return s-2*Math.floor((s+r.getDay())/7)}function _(e){const t=new Date(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));r.setUTCDate(r.getUTCDate()+4-(r.getUTCDay()||7));const n=new Date(Date.UTC(r.getUTCFullYear(),0,1));return Math.ceil(((r-n)/s+1)/7)}function y(e){return{hours:Math.floor(e/1e3/3600),minutes:Math.floor(e/1e3/60)%60,seconds:Math.floor(e/1e3)%60}}function w(e){const t=new Date(e||Date.now());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t}function k(e){const t=new Date(e||Date.now());return t.setHours(23),t.setMinutes(59),t.setSeconds(59),t}},2690:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3645),a=r.n(n)()((function(e){return e[1]}));a.push([e.id,'.hamburger,.hamburger:before,.hamburger:after{background-color:currentColor;width:100%;height:.2em;transition:transform .2s}.hamburger{position:relative;display:block}.hamburger:before,.hamburger:after{position:absolute;left:0;margin-top:-.6em;content:" "}.hamburger:after{margin-top:.6em}.hamburger--active{transform:rotate(-45deg)}.hamburger--active:before{margin-top:0}.hamburger--active:after{transform:rotate(90deg);margin-top:0}',""]);const i=a},3793:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3645),a=r.n(n)()((function(e){return e[1]}));a.push([e.id,'.center{text-align:center}.pull-right{float:right}.pull-left{float:left}.flex-container{display:flex}.flex--align-end{align-items:flex-end}.flex-item{flex:1}.application{display:flex;flex-direction:column;height:100vh;margin:0 auto;max-width:1024px}.application__init{display:flex;justify-content:center;align-items:center;height:100vh}.main{flex:1;background:#1f8dd6}@supports (-webkit-overflow-scrolling:touch){.main{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}}.login{height:100%;display:flex;justify-content:center;align-items:center}.login__error{color:#f5f5f5}.auth-form{color:#333;padding:.5em;width:100%}.auth-form input{border:1px solid #d3d3d3;border-radius:4px;display:block;margin-bottom:.5em;padding:.5em;width:100%}.auth-form .pure-button{display:block;width:100%}.AutoComplete{position:relative}.AutoComplete__label{display:block}.AutoComplete__input{display:block;font-size:1em;padding:.5em;width:100%}.AutoComplete__suggestions{background-color:#fff;box-shadow:0 13px 25px rgba(0,0,0,0.25);list-style-type:none;margin:0;padding-left:0;position:absolute;top:2em;left:0;min-width:100%;z-index:10}.AutoComplete__suggestion__btn{background-color:transparent;border:0;border-radius:0;display:block;font-size:1em;padding:.5em;text-align:left;min-width:100%}.button{transition:background .3s;display:inline-grid;grid-auto-flow:column;grid-gap:.5em;justify-content:center;align-items:center}.button--primary{background:#2d3e50;color:#6fbef3}.button--secondary{background:#555;color:#d3d3d3}.button--danger{background:#5a2929;color:#d3d3d3}.button--success{background:#7df36f;color:#6fbef3}.button--link{background:transparent;color:#2d3e50}.button--link:focus,.button--link:hover{background:transparent;text-decoration:underline}.work-button{border-radius:0;display:grid;font-size:1.5em;width:100%}\n@supports(-webkit-overflow-scrolling: touch) {\n  .work-button {\n    padding-left: max(1em, env(safe-area-inset-left));\n  }\n}\n.current-intervals{padding-top:5em}@media screen and (min-width:1024px){.current-intervals{margin-bottom:3em;padding-bottom:1.5em}}@supports (-webkit-overflow-scrolling:touch){.current-intervals .action-buttons{margin-left:calc(-1 * env(safe-area-inset-left));margin-right:calc(-1 * env(safe-area-inset-right))}}\n@supports(-webkit-overflow-scrolling: touch) {\n  .current-intervals {\n    padding-top: calc(5em + env(safe-area-inset-top));\n  }\n  .current-intervals__prev-work-btn {\n    padding-right: max(1em, env(safe-area-inset-right));\n  }\n}\n.current-intervals__prev-work-btn{border-radius:0;border-left:1px solid #1f8dd6}.previous-intervals{padding-bottom:4em}.previous-intervals__title{background:#2d3e50;color:#fff;padding:.5em}\n@supports(-webkit-overflow-scrolling: touch) {\n  .previous-intervals__title {\n    margin-left: calc(-1 * env(safe-area-inset-left));\n    padding-left: max(0.5em, env(safe-area-inset-left));\n    margin-right: calc(-1 * env(safe-area-inset-right));\n    padding-right: max(0.5em, env(safe-area-inset-right));\n  }\n}\n.previous-intervals__show-more{display:block;margin:0 .5em .5em;width:calc(100% - 1em)}.date-picker{padding-right:.5em;position:relative}.date-picker__calendar-btn{background:transparent;border:none;height:100%;padding:3px 0 0}.date-picker__calendar-btn:focus{outline:none}.date-picker__calendar{font-size:smaller;left:0;padding-top:.6em;position:absolute;top:2.6em;z-index:10}.date-picker__calendar .DayPicker-wrapper{background:#fff;color:#333}.date-picker:focus{outline:none}.date-picker--show-picker{color:#6fbef3}.date-picker--disabled{color:#add8e6}.digital-clock{font-weight:500;margin-bottom:1em;text-align:center}.digital-clock time{font-size:12vw;display:block;line-height:10vw;margin:0 auto}.footer{background-color:#2d3e50;color:#f5f5f5;display:flex;justify-content:space-between;align-items:center;padding:1em}.footer [role="img"]{color:#bd5a5a}@media screen and (min-width:1024px){.footer{position:fixed;bottom:0;left:0;right:0}}\n@supports(-webkit-overflow-scrolling: touch) {\n  .footer {\n    padding-left: max(1em, env(safe-area-inset-left));\n    padding-right: max(1em, env(safe-area-inset-right));\n    padding-bottom: max(1em, env(safe-area-inset-bottom));\n  }\n}\n.hamburger,.hamburger:before,.hamburger:after{background-color:currentColor;width:100%;height:.2em;transition:transform .2s}.hamburger{position:relative;display:block}.hamburger:before,.hamburger:after{position:absolute;left:0;margin-top:-.6em;content:" "}.hamburger:after{margin-top:.6em}.hamburger--active{transform:rotate(-45deg)}.hamburger--active:before{margin-top:0}.hamburger--active:after{transform:rotate(90deg);margin-top:0}.svg-icon{fill:currentColor}.add-one-interval{margin-top:1em;padding-right:.5em;display:flex;justify-content:space-between;align-items:center}.add-one-interval__interval-list-item{flex:2}.add-one-interval__interval-list-item button.delete{display:none}.add-one-interval__btn{font-size:1em;padding:.5em;width:40px;height:40px}.add-one-interval__btn:last-child{margin-left:.5em}.interval-list{list-style:none;padding-left:0}.interval-list input{padding:.5em .25em}@media screen and (min-width:480px){.interval-list input{padding:.5em}}.interval-list-input{display:flex;color:#fff;border-width:0;margin-left:.5em;flex:1}.interval-list-input__input{flex:1;order:1;color:#333;font-size:1em;padding:.5em;width:100%}.interval-list-input__input[disabled]{background:#f5f5f5;color:#a9a9a9;cursor:not-allowed}.interval-list-input__input:focus ~ .interval-list-input__date .date-picker__calendar{display:block;color:#f00}.interval-list-input__date{padding-right:0}@media screen and (min-width:480px){.interval-list-input__date{padding-right:.5em}}.interval-list-input__date .date-picker__icon{display:none}@media screen and (min-width:480px){.interval-list-input__date .date-picker__icon{display:block}}.interval-list-input--error{background:#f00;border-color:#8b0000;color:#8b0000}.interval-list-item{display:flex;margin-bottom:.5em}.interval-list-item .button{display:inline-block;font-size:1em;margin:0 .5em;width:auto;color:#fff}.interval-list-item .delete{flex-basis:40px;margin-left:0;padding:.5em}.interval-list-item__note{color:#333;font-size:1em;flex:1;margin:0 .5em}.interval-list-item__note[disabled]{background:#f5f5f5;color:#a9a9a9;cursor:not-allowed}.interval-list-item__no-work{margin:.75em .5em 0 0}.interval-stats{list-style:none;display:flex;padding:0;width:100%}.interval-stats .interval-stats-item{flex:1;padding:.5em}.month-stats__heading{margin:1em .5em}.week-stats{min-height:180px}.week-stats__bars,.week-stats__title{margin:1em .5em}.week-stats__title{font-weight:500;text-align:center}.week-stats__title .button{color:#fff;background-color:transparent}.week-stats-item{flex:1;margin-right:1px;text-align:center}.week-stats-item:last-child{margin-right:0}.week-stats-item__bar{background:#6fbef3;display:flex;flex-direction:column;position:relative;transition:height 400ms}.week-stats-item__bar .not-work{background:#bd5a5a}.week-stats-item__bar__item{display:flex;flex-direction:column;flex:1}.week-stats-item__bar__info{display:flex;justify-content:center;align-items:center;flex:1;font-size:smaller;opacity:0;margin:0;transition:opacity 400ms}.week-stats-item__bar__total{margin:0;position:absolute;top:0;left:0;width:100%;transition:opacity 400ms}.week-stats-item__bar:focus .week-stats-item__bar__info{opacity:1}.week-stats-item__bar:focus .week-stats-item__bar__total{opacity:0}.week-stats-item__total{position:absolute;bottom:0;width:100%}.MonthReport{padding:0 .5em}.MonthReport__title{margin-bottom:0;text-align:center}.MonthReport__subtitle{margin:0 0 .5em;text-align:center}.MonthReport__subtitle .button{background-color:transparent;color:#fff}.MonthReport__filters{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;font-size:.75em}.MonthReport__filter{background-color:rgba(45,62,80,0.25);color:rgba(255,255,255,0.5);margin-bottom:.25em}.MonthReport__filter--active{background-color:rgba(45,62,80,0.75);color:rgba(255,255,255,0.9)}.MonthReport__list{list-style-type:none;padding-left:0}.MonthReport__list-item{display:flex;align-items:center;justify-content:space-between;padding:0 .5em}.MonthReport__list-item:first-child,.MonthReport__list-item:last-child{border-top:1px solid rgba(255,255,255,0.75)}.MonthReport__list-item.not-work{background-color:rgba(189,90,90,0.75)}.MonthReport__list-item__title,.MonthReport__list-item__value{margin:.5em 0}.navbar{background:#2d3e50}.navbar .navbar__inner{display:flex;justify-content:space-between;align-items:center;max-width:1024px;margin:0 auto;padding:.5em}.navbar .version{color:#aaa;display:none}.navbar .brand{color:#fff;font-size:1.25em;line-height:.85em;margin:0}.navbar .brand:focus ~ .version,.navbar .brand:hover ~ .version{display:initial}.navbar .loading-container{color:#808080;display:grid;grid-auto-flow:column;grid-gap:.5em}.navbar .loading-text{display:none}@media screen and (min-width:480px){.navbar .loading-text{display:initial}}\n@supports(-webkit-overflow-scrolling: touch) {\n  .navbar {\n    padding-top: max(0.5em, env(safe-area-inset-top));\n    padding-left: max(0.5em, env(safe-area-inset-left));\n    padding-right: max(0.5em, env(safe-area-inset-right));\n  }\n}\n.navbar__menu-btn{background-color:transparent;display:inline-block;color:#fff;font-size:14px;width:2.5em;height:1.5em;padding:.3em}.navbar__user-menu{position:fixed;overflow-y:scroll;height:calc(100vh - 53px);width:100%;max-width:560px;top:53px;right:-100%;bottom:0;transition:right .2s}.navbar__user-menu--active{right:var(--user-menu-right-pos,0)}.navbar__user-menu-backdrop{background-color:rgba(45,62,80,0.7);border:none;position:fixed;top:53px;left:0;width:100vw;height:100vh;opacity:0;pointer-events:none;transition:opacity 150ms 0ms ease-in}.navbar__user-menu-backdrop:focus{outline:none}.navbar__user-menu-backdrop--active{opacity:1;pointer-events:auto;transition-duration:250ms;transition-delay:50ms}\n@supports(-webkit-overflow-scrolling: touch) {\n  .navbar__user-menu {\n    top: calc(53px + env(safe-area-inset-top));\n    height: calc(100vh - 53px - env(safe-area-inset-top));\n  }\n}\n.progress-bar{box-shadow:inset 1px 1px 5px rgba(0,0,0,0.1);color:rgba(255,255,255,0.25);display:flex;margin:1em .5em;position:relative;transition:margin 300ms}.progress-bar:hover{color:#fff}@media screen and (min-width:480px){.progress-bar{margin:1.5em .5em}}@media screen and (min-width:1024px){.progress-bar{margin:2em 0}}.progress-bar__text,.progress-bar__rest,.progress-bar__progress{line-height:2em;font-size:.75em;font-weight:100;flex:1;height:2em;transition:flex-basis 500ms;text-align:center}.progress-bar__progress{background-color:#6fbef3;box-shadow:inset 1px 1px 2px rgba(255,255,255,0.25)}.progress-bar__rest{background-color:rgba(45,62,80,0.25)}.progress-bar__text{position:absolute;top:0;left:0;width:100%}.progress-bar__text:hover{transform:scale(1.8)}.progress-bar__overtime{background-color:#7df36f;border-left:1px solid rgba(47,95,42,0.75)}.progress-bar--only-delta .progress-bar__text__progress{display:none}.user-menu{background-color:rgba(45,62,80,0.9);color:#f5f5f5;padding:1em 2em}.user-menu input:not([type=checkbox]){color:#333}.user-menu input[type=number]{text-align:right}.user-menu .user-menu__fieldset{margin-top:.5em}.user-menu .pure-menu-link{color:#f5f5f5}.user-menu .pure-button{display:grid;width:100%}.user-menu .pure-button-primary{margin-bottom:.5em}.user-menu .profile-image{border-radius:50%;margin-left:.5em;position:relative;top:3px;vertical-align:middle;width:50px}.user-menu__row{display:flex;justify-content:space-between;align-items:center}.user-menu__label{display:flex !important;align-items:center;padding:.25em 0;justify-content:space-between}.user-menu__log-out.button{color:#fff;width:auto}.user-menu__change-pass{display:grid;grid-row-gap:.5em;margin-top:2em}.user-menu__change-pass .user-menu__change-pass__label{margin:0 !important}.user-menu__change-pass .user-menu__change-pass__input{margin:0 !important;width:100%}.user-menu__change-pass .user-menu__change-pass__btn{border-radius:0 2px 2px 0}',""]);const i=a}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=n,e=[],i.O=(t,r,n,a)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],o=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(o=!1,a<s&&(s=a));o&&(e.splice(c--,1),t=n())}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+"."+{287:"e646749e250f4accf005",672:"22017a18b77571b367b3",830:"c945c5e61914e4fe6303",991:"415815768a5f5d8533ea"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},r="tajmr:",i.l=(e,n,a,s)=>{if(t[e])t[e].push(n);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",r+a),o.src=e),t[e]=[n];var p=(r,n)=>{o.onerror=o.onload=null,clearTimeout(m);var a=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),r)return r(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/tajmr/",(()=>{var e={143:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var a=new Promise(((r,a)=>{n=e[t]=[r,a]}));r.push(n[2]=a);var s=i.p+i.u(t),o=new Error;i.l(s,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,n[1](o)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[s,o,l]=r,c=0;for(n in o)i.o(o,n)&&(i.m[n]=o[n]);for(l&&l(i),t&&t(r);c<s.length;c++)a=s[c],i.o(e,a)&&e[a]&&e[a][0](),e[s[c]]=0;i.O()},r=globalThis.webpackChunktajmr=globalThis.webpackChunktajmr||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.O(void 0,[693],(()=>i(8846)));var s=i.O(void 0,[693],(()=>i(7408)));s=i.O(s)})();