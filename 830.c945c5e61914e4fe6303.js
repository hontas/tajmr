(globalThis.webpackChunktajmr=globalThis.webpackChunktajmr||[]).push([[830],{6504:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(7294),s=n(5697),a=n.n(s),i=n(5615);const o=({error:e,componentStack:t,resetError:n})=>r.createElement("div",{style:{padding:"1em",backgroundColor:"rgba(0,0,0,0.2)"}},r.createElement("h1",null,"Oh noes ðŸ˜±"),r.createElement("pre",null,r.createElement("code",null,e.toString()),r.createElement("code",null,t)),r.createElement(i.Z,{onClick:()=>n(),text:"Reset error"}));o.propTypes={error:a().shape({}),componentStack:a().string,resetError:a().func.isRequired}},2830:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ce});var r=n(7294),s=n(5697),a=n.n(s),i=n(1512),o=n(4975),l=n(4184),c=n.n(l),m=n(5615),u=n(1657),p=n(9859);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h="notwork";class v extends r.Component{constructor(...e){super(...e),d(this,"state",{referenceDate:new Date,filterOut:[]}),d(this,"toggleFilter",(e=>{this.state.filterOut.includes(e)?this.setState((t=>({filterOut:t.filterOut.filter((t=>t!==e))}))):this.setState((t=>({filterOut:[...t.filterOut,e]})))})),d(this,"lastMonth",(()=>{const{referenceDate:e}=this.state,t=new Date(e);t.setMonth(e.getMonth()-1),this.setState({referenceDate:t})})),d(this,"nextMonth",(()=>{const{referenceDate:e}=this.state,t=new Date(e);t.setMonth(e.getMonth()+1),this.setState({referenceDate:t})})),d(this,"getGroupedIntervalsBy",(e=>this.getMonthIntervals().reduce(((t,n)=>{let r=n[e]?n[e].toLowerCase():"-";return n.notWork&&(r=`notwork:${r}`),t[r]||(t[r]=0),t[r]+=(n.endTime||Date.now())-n.startTime,t}),{}))),d(this,"getMonthIntervals",(()=>{const{referenceDate:e}=this.state,{intervals:t}=this.props,{startTime:n,endTime:r}=(0,p.jw)(e);return t.filter((e=>e.startTime>n&&e.startTime<=r))}))}render(){const{referenceDate:e,filterOut:t}=this.state,{className:n}=this.props,s=this.getGroupedIntervalsBy("note"),a=Object.keys(s).map((e=>e.toLowerCase())),i=a.filter((e=>!t.includes(e))),o=i.reduce(((e,t)=>e+s[t]),0);return r.createElement("div",{className:c()("MonthReport",n)},r.createElement("h2",{className:"MonthReport__title"},"MÃ¥nadssammanstÃ¤llning"),r.createElement("h3",{className:"MonthReport__subtitle"},r.createElement(m.Z,{onClick:this.lastMonth},"â—€ï¸Ž"),`${p.e7[e.getMonth()]} ${e.getFullYear()}`,r.createElement(m.Z,{onClick:this.nextMonth},"â–¶ï¸Ž")),r.createElement("div",{className:"MonthReport__filters"},a.map((e=>r.createElement(m.Z,{className:c()("MonthReport__filter",{"MonthReport__filter--active":i.includes(e)}),key:e,onClick:()=>this.toggleFilter(e)},e)))),r.createElement("ul",{className:"MonthReport__list"},i.map((e=>r.createElement("li",{key:e,className:c()("MonthReport__list-item",{"not-work":e.startsWith(h)})},r.createElement("p",{className:"MonthReport__list-item__title"},e),r.createElement("p",{className:"MonthReport__list-item__value"},`${(0,p.pD)(s[e]).toFixed(1)}h`)))),r.createElement("li",{className:"MonthReport__list-item"},r.createElement("p",{className:"MonthReport__list-item__title"},"TOTAL:"),r.createElement("p",{className:"MonthReport__list-item__value"},`${(0,p.pD)(o).toFixed(1)}h`))))}}v.propTypes={className:a().string,intervals:u.FC.isRequired};const f=v;function g(e){return e.displayName||e.name||"Component"}const b=3e4;function y(e){if(!e||"number"!=typeof e)throw Error("Argument for render interval must be number");return t=>{class n extends r.Component{componentDidMount(){this.intervalId=setInterval((()=>{this.forceUpdate()}),e)}componentWillUnmount(){clearInterval(this.intervalId)}render(){return r.createElement(t,this.props)}}return n.getDisplayName=g(t),n}}var w=n(3635),k=n.n(w);const E=({from:e,elapsed:t})=>{const n=e?Date.now()-e+t:t,{hours:s,minutes:a}=(0,p.Ds)(n),i=(0,p.u6)(n,{isDuration:!0});return e&&s&&0===a&&k()(`Nu har du jobbat i ${s} timmar.`),r.createElement("div",{className:"digital-clock"},r.createElement("time",null,i))};E.propTypes={elapsed:a().number.isRequired,from:a().number.isRequired};const O=y(b)(E);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const D=e=>{let{isLoading:t=!1,activeInterval:n,onClick:s}=e,a=N(e,["isLoading","activeInterval","onClick"]);const i=n?"Ta en fika â–â–":"BÃ¶rja debitera â–¶";return r.createElement(m.Z,_({},a,{theme:"primary",className:"work-button",onClick:s,text:i,disabled:t}))};D.propTypes={activeInterval:a().bool.isRequired,onClick:a().func.isRequired,isLoading:a().bool};const C=D;function T(e){return Math.round(10*e)/10}const P=({progress:e,max:t,onlyDelta:n,unit:s=""})=>{const a=(e/t).toFixed(2),i=a>1,o=i?1/a*100+"%":100*a+"%",l=i?100*(1-1/a)+"%":100*(1-a)+"%",m=T(Math.abs(t-e)),u=c()("progress-bar",{"progress-bar--only-delta":n}),p=[e,t].map(T).join(" / ");return r.createElement("div",{className:u},r.createElement("div",{style:{flexBasis:o},className:"progress-bar__progress"}),r.createElement("div",{style:{flexBasis:l},className:c()("progress-bar__rest",{"progress-bar__overtime":i})}),r.createElement("div",{className:"progress-bar__text"},r.createElement("span",{className:"progress-bar__text__progress"},p),!!m&&!n&&" | ",!!m&&r.createElement("span",{className:"progress-bar__text__delta"},`${m}${s}`)))};P.propTypes={progress:a().number.isRequired,onlyDelta:a().bool,unit:a().string,max:a().number.isRequired};const j=P,x=({intervals:e,max:t})=>{const n=Date.now(),s=e.map((({startTime:e,endTime:t})=>(t||n)-e)).reduce(((e,t)=>e+t),0);return x.propTypes={intervals:u.FC.isRequired,max:a().number.isRequired},x.displayName=g(j),r.createElement(j,{progress:(0,p.pD)(s),max:t})},R=y(b)(x);var I=n(6402),M=n(6739);const S=({hoursPerWeek:e,monthIntervals:t,timestamp:n})=>{const s=(0,p.jw)(n),a={startTime:s.startTime,endTime:Date.now()},i=(0,M.kB)(t)/p.ml,o=e/5*(0,p.l5)(s),l=e/5*(0,p.l5)(a);return r.createElement("div",{className:"month-stats"},r.createElement("h3",{className:"month-stats__heading"},"MÃ¥nad"),r.createElement(j,{progress:i,max:o}),r.createElement("h3",{className:"month-stats__heading"},"Flex"),r.createElement(j,{progress:i,max:l,unit:"h",onlyDelta:!0}))};S.defaultProps={hoursPerWeek:40},S.propTypes={monthIntervals:u.FC.isRequired,hoursPerWeek:a().number,timestamp:a().number.isRequired};const q=S,A=e=>(0,p.u6)(e,{isDuration:!0}),W=({weekday:e,total:t,date:n,intervals:s=[]})=>{const a=10*(0,p.pD)(t),i={height:`${a}px`},o="week-stats-item",l="week-stats-item__bar",m=s.reduce(((e,{timespan:t})=>e+t),0);return r.createElement("div",{className:o},r.createElement("div",{className:l,style:i,tabIndex:"-1","data-testid":"week-stats-item"},s.map((({timespan:e,note:t,notWork:n})=>r.createElement("div",{className:c()(`${l}__item`,{"not-work":n}),key:e},r.createElement("p",{className:`${l}__info`},`${A(e)} ${t}`)))),m>0&&r.createElement("p",{className:`${l}__total`,style:{lineHeight:`${a}px`}},A(m))),r.createElement("p",{className:"week-date"},r.createElement("span",null,e),r.createElement("br",null),r.createElement("span",null,n)))};W.defaultProps={total:0},W.propTypes={weekday:a().string.isRequired,total:a().number,date:a().string.isRequired,intervals:a().arrayOf(a().object)};const Z=W;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $ extends r.Component{constructor(...e){super(...e),H(this,"lastWeek",(()=>{const{fetchIntervalsInWeek:e,timestamp:t}=this.props;e(t-p.un)})),H(this,"nextWeek",(()=>{const{fetchIntervalsInWeek:e,timestamp:t}=this.props;e(t+p.un)}))}render(){const{intervals:e,timestamp:t,userSettings:n}=this.props,s=Date.now(),a=e.map((({startTime:e,endTime:t})=>(t||s)-e)).reduce(((e,t)=>e+t),0);return r.createElement("div",{className:"week-stats"},r.createElement("h3",{className:"week-stats__title"},r.createElement(m.Z,{onClick:this.lastWeek,"data-testid":"prev-week-btn"},"â—€ï¸Ž"),e.length?` v.${(0,p.uW)(t)} `:` v.${(0,p.uW)(s)} `,r.createElement(m.Z,{onClick:this.nextWeek,"data-testid":"next-week-btn"},"â–¶ï¸Ž")),r.createElement("div",{className:"week-stats__bars flex-container flex--align-end"},function(e,t){const n=function(e){return e.reduce(((e,{startTime:t,endTime:n,notWork:r,note:s})=>{const a=new Date(t),i=(0,p._3)(a),o=(0,p.FO)(a),l=(n||Date.now())-t,c=e[i]||{total:0,weekDay:o,intervals:[]};return U(U({},e),{},{[i]:U(U({},c),{},{notWork:r||c.notWork,total:c.total+l,intervals:[...c.intervals,{notWork:r,timespan:l,note:s}]})})}),{})}(e);return(0,p.BN)(t).map((e=>U(U({},e),{},{total:0},n[e.date]))).filter((e=>!e.isWeekEnd||0!==e.total))}(e,t).map((e=>r.createElement(Z,F({key:e.weekday},e))))),r.createElement(j,{progress:(0,p.pD)(a),max:n.hoursInWeek}))}}$.propTypes={fetchIntervalsInWeek:u.ZP.func.isRequired,intervals:u.FC.isRequired,userSettings:u.AQ.isRequired,timestamp:u.ZP.number.isRequired};const V=y(b)($);var z=n(8593),B=n(7615),X=n(1138);const G=({className:e,size:t=30})=>r.createElement("svg",{style:{width:t},className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"30 25 40 45"},r.createElement("path",{d:"M42 31v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V31a1 1 0 0 1 1-1h2.586a1 1 0 0 1 .707.293l7.414 7.414a1 1 0 0 1 .293.707V69a1 1 0 0 1-1 1H31a1 1 0 0 1-1-1V31a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1zm9-1h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1zM34 47v18a1 1 0 0 0 1 1h30a1 1 0 0 0 1-1V47a1 1 0 0 0-1-1H35a1 1 0 0 0-1 1z",fillRule:"evenodd"}));G.propTypes={size:a().number,className:a().string};const K=(0,X.Z)(G);function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Y extends r.Component{constructor(e){super(e),Q(this,"onAdd",(e=>{e.preventDefault(),this.props.onAdd(this.state.interval)})),Q(this,"onCancel",(()=>{})),Q(this,"onUpdate",(e=>{this.setState({interval:e})}));const t=parseInt(e.fullDay,10),n=Math.round(60*(e.fullDay-t));this.state={interval:{startTime:ee(9),endTime:ee(9+t,n),note:""}}}render(){const{interval:e}=this.state,{notes:t,onCancel:n}=this.props;return r.createElement("form",{className:"add-one-interval",onSubmit:this.onAdd},r.createElement(B.Z,{className:"add-one-interval__interval-list-item",interval:e,onUpdate:this.onUpdate,onDelete:J,notes:t}),r.createElement(m.Z,{type:"submit",theme:"primary",onClick:this.onAdd,className:"add-one-interval__btn"},r.createElement(K,{size:17})),r.createElement(m.Z,{theme:"secondary",className:"add-one-interval__btn",onClick:n},"âœ–"))}}function J(){}function ee(e,t=0,n=0){const r=new Date;return r.setHours(e),r.setMinutes(t),r.setSeconds(n),r.getTime()}Y.propTypes={onAdd:a().func.isRequired,onCancel:a().func.isRequired,fullDay:a().number.isRequired,notes:a().arrayOf(a().string)};const te=Y;var ne=n(6504);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ie extends r.Component{constructor(...e){super(...e),ae(this,"state",{displayAddForm:!1}),ae(this,"updateTimestamp",(e=>{this.props.updateTimestamp(e)})),ae(this,"onDelete",(e=>this.props.attemptRemove(e))),ae(this,"onUpdate",(e=>this.props.attemptUpdate(e))),ae(this,"onClick",(()=>{const{activeInterval:e,attemptUpdate:t}=this.props;if(e){return t(se(se({},e),{},{endTime:Date.now()}))}return t({startTime:Date.now()})})),ae(this,"onAddPrevClick",(()=>this.setState({displayAddForm:!0}))),ae(this,"onCancelPrevClick",(()=>this.setState({displayAddForm:!1}))),ae(this,"onAddOneInterval",(e=>{const{attemptUpdate:t,intervalAdded:n}=this.props;t(e).then((e=>{this.setState({displayAddForm:!1}),n(e)}))}))}render(){const{isLoading:e,intervals:t,activeInterval:n,todaysIntervals:s,userSettings:a,timestamp:i,notes:l}=this.props,{displayAddForm:c}=this.state,u=n?[].concat(n,s):s,d=a.hoursInWeek||40,h=d/5,v=(0,M.kB)(s),g=(0,p.Qk)(i),b=(0,p.jw)(i),y=t.filter((({startTime:e})=>e>g.startTime&&e<g.endTime)),w=t.filter((({startTime:e})=>e>b.startTime&&e<b.endTime));return r.createElement("div",{className:"current-intervals"},r.createElement(o.SV,{fallback:ne.l},r.createElement(r.Fragment,null,r.createElement(O,{elapsed:v,from:n?n.startTime:0}),r.createElement(R,{intervals:u,max:d/5}),r.createElement("div",{className:"action-buttons",style:{display:"flex"}},r.createElement(C,{"data-testid":"work-button",activeInterval:!!n,onClick:this.onClick,isLoading:e}),r.createElement(m.Z,{className:"current-intervals__prev-work-btn",theme:"primary",onClick:this.onAddPrevClick},"Efterregga")),c&&r.createElement(te,{onAdd:this.onAddOneInterval,onCancel:this.onCancelPrevClick,fullDay:h,notes:l}),r.createElement(I.Z,{"data-testid":"current-intervals-list",intervals:u,onDelete:this.onDelete,onUpdate:this.onUpdate,notes:l}),r.createElement(V,{fetchIntervalsInWeek:this.updateTimestamp,intervals:y,timestamp:i,userSettings:a}),t.length>0&&r.createElement(q,{timestamp:i,monthIntervals:w,hoursPerWeek:a.hoursInWeek}),a.displayMonthReport&&r.createElement(f,{intervals:t}))))}}ie.propTypes=se(se({},ie.propTypes),{},{isLoading:a().bool,activeInterval:u.FG,intervals:u.FC.isRequired,todaysIntervals:u.FC.isRequired,attemptUpdate:a().func.isRequired,attemptRemove:a().func.isRequired,updateTimestamp:a().func.isRequired,timestamp:a().number.isRequired,notes:a().arrayOf(a().string)}),ie.defaultProps={activeInterval:null};const oe=(0,p.PE)(Date.now());function le({startTime:e,endTime:t}){const n=e>oe.startTime,r=t>oe.startTime&&t<oe.endTime;return n||r}const ce=(0,i.$j)((function({intervals:{items:e,timestamp:t,isFetching:n,isSaving:r},userSettings:s}){const a=e.map((({note:e})=>e?e.toLowerCase():e)).filter((e=>e));return{timestamp:t,isLoading:n||r,intervals:e,todaysIntervals:e.filter(le).filter(M.ew),activeInterval:e.find(M.zh),userSettings:s,notes:[...new Set(a)]}}),z)(ie)},1138:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7294),s=n(4184),a=n.n(s);const i=e=>({className:t,size:n=30})=>r.createElement(e,{className:a()("svg-icon",t),size:n})},6402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7294),s=n(5697),a=n.n(s),i=n(1657),o=n(7615);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const m=e=>{let{intervals:t,onDelete:n,onUpdate:s,notes:a=[]}=e,i=c(e,["intervals","onDelete","onUpdate","notes"]);return r.createElement("ul",l({},i,{className:"interval-list"}),(m=t,u="startTime",m.slice().sort(((e,t)=>t[u]-e[u]))).map((e=>r.createElement(o.Z,{key:e.id,interval:e,onDelete:n,onUpdate:s,notes:a}))));var m,u};m.propTypes={intervals:i.FC.isRequired,onDelete:a().func.isRequired,onUpdate:a().func.isRequired,notes:a().arrayOf(a().string)};const u=m},7615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(7294),s=n(5697),a=n.n(s),i=n(4184),o=n.n(i),l=n(7737);n(794);const c=({size:e=30})=>r.createElement("svg",{style:{width:e},className:"svg-icon icon-calendar",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 98 98"},r.createElement("path",{d:"M89,14H83V9.5a7.5,7.5,0,0,0-15,0V14H32V9.5a7.5,7.5,0,0,0-15,0V14H11a9,9,0,0,0-9,9V89a9,9,0,0,0,9,9H89a9,9,0,0,0,9-9V23A9,9,0,0,0,89,14ZM86,86H14V35H86ZM23,53V47a3,3,0,0,1,3-3h6a3,3,0,0,1,3,3v6a3,3,0,0,1-3,3H26A3,3,0,0,1,23,53Zm21,0V47a3,3,0,0,1,3-3h6a3,3,0,0,1,3,3v6a3,3,0,0,1-3,3H47A3,3,0,0,1,44,53Zm21,0V47a3,3,0,0,1,3-3h6a3,3,0,0,1,3,3v6a3,3,0,0,1-3,3H68A3,3,0,0,1,65,53ZM23,74V68a3,3,0,0,1,3-3h6a3,3,0,0,1,3,3v6a3,3,0,0,1-3,3H26A3,3,0,0,1,23,74Zm21,0V68a3,3,0,0,1,3-3h6a3,3,0,0,1,3,3v6a3,3,0,0,1-3,3H47A3,3,0,0,1,44,74Z"}));c.propTypes={size:a().number};const m=c,u=({className:e,date:t,onDayClick:n,buttonTitle:s})=>{const[a,i]=(0,r.useState)(),c=(0,r.useRef)(),u=(0,r.useRef)(null),p=o()("date-picker",e,{"date-picker--disabled":!t,"date-picker--show-picker":a});return r.createElement("div",{className:p,ref:c},r.createElement("button",{type:"button",className:"date-picker__calendar-btn",title:s,onClick:e=>{if(e.preventDefault(),i(!a),a||u.current)document.removeEventListener("click",u.current),u.current=null;else{const e=({target:t})=>{!1===c?.current.contains(t)&&(i(!1),document.removeEventListener("click",e))};u.current=e,document.addEventListener("click",e,!1)}}},r.createElement(m,null)),t&&a&&r.createElement(l.ZP,{className:"date-picker__calendar",initialMonth:new Date(t),showOutsideDays:!0,firstDayOfWeek:1,selectedDays:new Date(t),onDayClick:n}))};u.defaultProps={className:"",buttonTitle:"",date:null},u.propTypes={className:a().string,buttonTitle:a().string,date:a().number,onDayClick:a().func.isRequired};const p=u;var d=n(9859);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){const t=!e.timestamp;return{value:t?"active":(0,d.u6)(e.timestamp),isActive:t,isValid:!0,timestamp:e.timestamp}}class f extends r.Component{constructor(...e){super(...e),h(this,"state",v(this.props)),h(this,"validateAndPush",(()=>{const{value:e}=this.state,{timestamp:t,onUpdate:n}=this.props,r=function(e){const[t,n]=e.split(":").map((e=>parseInt(e,10)));return t>=0&&t<24&&n>=0&&n<60&&/^\d{2}:\d{2}$/.test(e)}(e);if(e!==(0,d.u6)(t)){if(r){const[r,s]=e.split(":"),a=new Date(t);a.setHours(r),a.setMinutes(s),n({target:{value:a.getTime()}})}else console.log("Wrong format %s - should be XX:XX where X is a positive integer",e);this.setState({isValid:r})}})),h(this,"handleDateChange",(e=>{const{timestamp:t,onUpdate:n}=this.props,r=new Date(t),s=new Date(e);r.setDate(s.getDate()),r.setMonth(s.getMonth()),n({target:{value:r.getTime()}})})),h(this,"handleChange",(({target:{value:e}})=>{this.setState({value:e})}))}static getDerivedStateFromProps(e,t){return e.timestamp!==t.timestamp?v(e):null}render(){const{className:e,timestamp:t,titlePrefix:n,dataTestId:s}=this.props,{value:a,isActive:i,isValid:l}=this.state,c="interval-list-input",m=l?"":`${c}--error`;return r.createElement("div",{className:o()(c,e,m)},r.createElement("input",{type:"text","data-testid":s,title:`${n} time`,className:`${c}__input`,disabled:i,onBlur:this.validateAndPush,onChange:this.handleChange,value:a}),r.createElement(p,{buttonTitle:`${n} date`,className:`${c}__date`,date:t,onDayClick:this.handleDateChange}))}}f.defaultProps={className:"",dataTestId:""},f.propTypes={className:a().string,dataTestId:a().string,titlePrefix:a().string,timestamp:a().number,onUpdate:a().func.isRequired};const g=f;var b=n(1657),y=n(1138);const w=({className:e,size:t=30})=>r.createElement("svg",{style:{width:t},className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 98"},r.createElement("path",{d:"M52.796,27l-0.963,55.667h10.001L62.797,27H52.796z M46.21,27H36.209l0.963,55.667h10.001L46.21,27z M69.399,87.95  l-0.003,0.161c0,0.316-0.255,0.573-0.567,0.573H30.18c-0.316,0-0.573-0.257-0.573-0.573L27.642,27H17.638l1.969,61.204  c0.051,5.788,4.774,10.48,10.573,10.48h38.649c5.796,0,10.518-4.693,10.567-10.481L81.365,27H71.361L69.399,87.95z M67.854,10.972  l-2-9.655h-32.7l-2,9.655H11.48v10H88.52v-10H67.854z"}));w.propTypes={size:a().number,className:a().string};const k=(0,y.Z)(w);var E=n(5615);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends r.Component{constructor(e){super(e),O(this,"onKeyDown",(e=>{const{suggestions:t}=this.state;if(["ArrowDown","ArrowUp"].includes(e.key)&&t.length){const t="ArrowUp"===e.key?-1:1,n=e.target.parentNode,r=[].indexOf.call(this.suggestionsList.childNodes,n),s=-1===r?0:r+t;if(s<0||s>=this.suggestionsList.childNodes.length)return;return this.suggestionsList.childNodes[s].firstElementChild.focus(),void e.preventDefault()}switch(e.key){case"Enter":e.target.classList.contains("AutoComplete__suggestion__btn")&&this.onSelect(e);break;case"Escape":this.setState({suggestions:[]})}})),O(this,"onSelect",(e=>{e.preventDefault(),this.timeoutId&&clearTimeout(this.timeoutId);const t=e.target.textContent;this.setState({query:t,suggestions:[]}),this.props.onChange({target:{value:t}})})),O(this,"onChange",(({target:e})=>{const t=e.value.toLowerCase(),n=this.props.notes.filter((e=>e.toLowerCase().startsWith(t)));this.setState({query:t,suggestions:t?n:[]})})),O(this,"onBlur",(({target:e})=>{const t=e.value.toLowerCase();this.suggestionsList.hasChildNodes(e)||t!==this.props.value&&(this.timeoutId=setTimeout((()=>{this.props.onChange({target:{value:t}}),this.timeoutId=null}),1))})),this.state={query:e.value||"",suggestions:[]}}render(){const{query:e,suggestions:t}=this.state,{className:n,label:s="",placeholder:a=""}=this.props;return r.createElement("div",{className:o()("AutoComplete",n),onKeyDown:this.onKeyDown,role:"presentation"},r.createElement("label",{className:"AutoComplete__label"},s,r.createElement("input",{type:"text",value:e,placeholder:a,className:"AutoComplete__input",onBlur:this.onBlur,onChange:this.onChange})),r.createElement("ul",{className:"AutoComplete__suggestions",ref:e=>{this.suggestionsList=e}},!!t.length&&t.map((e=>r.createElement("li",{key:e,className:"AutoComplete__suggestion"},r.createElement("button",{className:"AutoComplete__suggestion__btn",onClick:this.onSelect,type:"button"},e))))))}}_.defaultProps={notes:[]},_.propTypes={className:a().string,label:a().string,placeholder:a().string,onChange:a().func.isRequired,value:a().string,notes:a().arrayOf(a().string)};const N=_;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P extends r.Component{constructor(...e){super(...e),T(this,"onChecked",(e=>({target:{checked:t}})=>{const{interval:n,onUpdate:r}=this.props;r(C(C({},n),{},{[e]:t}))})),T(this,"updateProp",(e=>({target:{value:t}})=>{const{interval:n,onUpdate:r}=this.props;r(C(C({},n),{},{[e]:t}))})),T(this,"remove",(()=>{const{onDelete:e,interval:t}=this.props;e(t.id)}))}render(){const{notes:e,className:t,interval:{startTime:n,endTime:s,note:a,notWork:i}}=this.props;return r.createElement("li",{className:o()("interval-list-item",t),"data-testid":"interval-item"},r.createElement(g,{dataTestId:"interval-from-input",titlePrefix:"from",timestamp:n,onUpdate:this.updateProp("startTime")}),r.createElement(g,{dataTestId:"interval-end-input",titlePrefix:"end",timestamp:s,onUpdate:this.updateProp("endTime")}),r.createElement(N,{className:"interval-list-item__note",placeholder:"Anteckning",onChange:this.updateProp("note"),value:a,notes:e}),r.createElement("input",{className:"interval-list-item__no-work",type:"checkbox",title:"not work",checked:i||!1,onChange:this.onChecked("notWork")}),r.createElement(E.Z,{className:"delete",theme:"danger",title:"remove","data-testid":"remove-interval",onClick:this.remove},r.createElement(k,{size:15})))}}P.propTypes={interval:b.FG.isRequired,onDelete:a().func.isRequired,onUpdate:a().func.isRequired,notes:a().arrayOf(a().string),className:a().string};const j=P},6739:(e,t,n)=>{"use strict";n.d(t,{ew:()=>s,zh:()=>a,kB:()=>o});const r=({startTime:e,endTime:t})=>t-e,s=({endTime:e})=>e,a=e=>!s(e),i=(e,t)=>e+t,o=e=>e.filter(s).map(r).reduce(i,0)},3635:e=>{e.exports=e=>{"Notification"in window!=!1&&Notification.requestPermission((t=>{if("granted"===t){const t=(n="tajmr",new Notification(n,{body:e,icon:"icons/apple-touch-icon.png",tag:n}));setTimeout((()=>{t.close()}),5e3)}var n}))}}}]);