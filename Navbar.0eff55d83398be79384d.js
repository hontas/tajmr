/*! For license information please see Navbar.0eff55d83398be79384d.js.LICENSE.txt */
(globalThis.webpackChunktajmr=globalThis.webpackChunktajmr||[]).push([[160],{5615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(7294),s=r(5697),a=r.n(s),i=r(4184),o=r.n(i),u=r(1733);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}const p=n.forwardRef(((e,t)=>{let{className:r,text:s,isLoading:a,disabled:i,children:p,type:d="button",theme:m="default"}=e,h=c(e,["className","text","isLoading","disabled","children","type","theme"]);const g=o()("pure-button button",`button--${m}`,r);return n.createElement("button",l({ref:t},h,{className:g,type:d,disabled:i}),s,p,a&&n.createElement(u.sm,{size:"15px"}))}));p.defaultProps={text:null,children:null,isLoading:!1},p.propTypes={className:a().string,isLoading:a().bool,disabled:a().bool,onClick:a().func.isRequired,text:a().string,type:a().oneOf(["button","submit"]),theme:a().oneOf(["default","primary","secondary","danger","success","link"]),children:a().oneOfType([a().string,a().element,a().arrayOf(a().element)])};const d=p},6882:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(7294),s=r(5697),a=r.n(s),i=r(7703),o=r(4184),u=r.n(o),l=r(5615),c=r(3379),p=r.n(c),d=r(2690),m={insert:"head",singleton:!1};p()(d.Z,m);d.Z.locals;const h=({className:e,active:t})=>n.createElement("div",{className:u()("hamburger",{"hamburger--active":t},e)});h.propTypes={className:a().string,active:a().bool};const g=h;var f=r(2568),b=r.n(f),v=r(1657),y=r(4429);function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S extends n.Component{constructor(...e){super(...e),_(this,"state",{isSavingUserSettings:!1,isSavingUserPassword:!1,updatePasswordError:null,updatePasswordSuccess:!1}),_(this,"preventDefault",(e=>{"keydown"===e.type&&"Enter"!==e.key||e.preventDefault()})),_(this,"updateUserPassword",(e=>{e.preventDefault();const t=this.oldPass.value,r=this.newPass.value;this.setState({isSavingUserPassword:!0});const n=({message:e})=>this.setState({isSavingUserPassword:!1,updatePasswordError:e,updatePasswordSuccess:!e});y.Z.updateUserPassword(t,r).then((()=>{n({message:""}),setTimeout((()=>this.setState({updatePasswordSuccess:!1})),2e3),this.oldPass.value="",this.newPass.value=""})).catch(n)})),_(this,"saveUserSettings",(e=>{e.preventDefault();const{user:t,userSettings:r}=this.props;this.setState({isSavingUserSettings:!0}),y.Z.saveUserData(t.uid,r).then((()=>{this.setState({isSavingUserSettings:!1})}))}))}render(){const{userSettings:e,user:t,className:r}=this.props,{displayMonthReport:s,displayNotifications:a,displayPreviousIntervals:i,hoursInWeek:o}=e,{isSavingUserSettings:c,isSavingUserPassword:p,updatePasswordError:d,updatePasswordSuccess:m}=this.state,h=t&&(t.photoURL||`https://www.gravatar.com/avatar/${b()(t.email)}`);return n.createElement("form",{"data-testid":"user-menu",className:u()("pure-form pure-form-stacked user-menu",r),onSubmit:this.preventDefault},n.createElement("div",{className:"user-menu__row"},n.createElement("img",{alt:"avatar",className:"profile-image",src:h}),n.createElement(l.Z,{className:"user-menu__log-out",theme:"link",onClick:y.Z.logout},"Logga ut")),n.createElement("fieldset",{className:"user-menu__fieldset"},n.createElement("label",{className:"user-menu__label"},"Visa notifiering",n.createElement("input",{checked:a,onChange:this.handleChange("displayNotifications"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Visa tidigare intervall",n.createElement("input",{checked:i,onChange:this.handleChange("displayPreviousIntervals"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Visa månadsrapport",n.createElement("input",{checked:s,onChange:this.handleChange("displayMonthReport"),style:{float:"right"},type:"checkbox"})),n.createElement("label",{className:"user-menu__label"},"Full arbetsvecka (h)",n.createElement("input",{value:o,onChange:this.handleChange("hoursInWeek",Number),style:{float:"right",width:"100px"},type:"number"}))),n.createElement(l.Z,{className:"pure-button-primary",isLoading:c,onClick:this.saveUserSettings,text:"Spara inställningar"}),n.createElement("fieldset",{className:"user-menu__fieldset"},d&&n.createElement("p",{style:{whiteSpace:"normal"}},d),n.createElement("div",{className:"user-menu__change-pass"},n.createElement("label",{htmlFor:"oldPassword",className:"user-menu__change-pass__label"},n.createElement("input",{onKeyDown:this.preventDefault,autoComplete:"old-password",className:"user-menu__change-pass__input",ref:e=>{this.oldPass=e},type:"password",placeholder:"Nuvarande lösenord",id:"oldPassword"})),n.createElement("label",{htmlFor:"newPassword",className:"user-menu__change-pass__label"},n.createElement("input",{onKeyDown:this.preventDefault,autoComplete:"new-password",className:"user-menu__change-pass__input",ref:e=>{this.newPass=e},type:"password",placeholder:"Nytt lösenord",id:"newPassword"})),n.createElement(l.Z,{theme:m?"success":"default",className:"user-menu__change-pass__btn pure-button-primary",isLoading:p,onClick:this.updateUserPassword,text:m?"👍":"Ändra"}))))}handleChange(e,t=(e=>e)){const{updateSettings:r}=this.props;return({target:n})=>{const s="checkbox"===n.type?n.checked:t(n.value);r(e,s)}}}S.propTypes={className:a().string,updateSettings:a().func.isRequired,user:a().shape({uid:a().string.isRequired,photoURL:a().string,email:a().string.isRequired}),userSettings:v.AQ.isRequired};const w=S;var E=r(1068),N=r(1733);function P({user:e,isSaving:t,isFetching:r,appInitialized:s,userSettings:a,dispatch:i}){const[o,c]=n.useState(!1),p=n.useRef(null),d=s&&(t||r),m=n.useRef(),h=n.useRef(),f=()=>{o?(document.body.style.overflow="",m.current.focus()):(document.body.style.overflow="hidden",h.current.focus()),c(!o)};return n.createElement("nav",{className:"navbar pure-menu pure-menu-horizontal pure-menu-fixed"},n.createElement("div",{className:"navbar__inner",ref:p},n.createElement("h1",{className:"brand pure-menu-heading"},"TajmR"),n.createElement("span",{className:"version"},n.createElement("small",null,"tajmr@1.0.5 - 25 apr. 2021 14:42")),d&&n.createElement("div",{"data-testid":r?"loading-intervals-container":"saving-intervals-container",className:"loading-container"},n.createElement(N.iC,{color:"currentColor"}),n.createElement("small",{className:"loading-text"},r?"Laddar intervall...":"Sparar...")),e&&n.createElement(n.Fragment,null,n.createElement(l.Z,{ref:m,className:"navbar__menu-btn","data-testid":"user-menu-toggle",onClick:f},n.createElement(g,{active:o})),n.createElement("button",{ref:h,className:u()("navbar__user-menu-backdrop",{"navbar__user-menu-backdrop--active":o}),onClick:f,title:"Close user menu","aria-label":"Close user menu"}),n.createElement(w,{user:e,userSettings:a,updateSettings:(e,t)=>{i(E.V({[e]:t}))},className:u()("navbar__user-menu",{"navbar__user-menu--active":o})}))))}P.propTypes={dispatch:a().func.isRequired,isFetching:a().bool.isRequired,isSaving:a().bool.isRequired,appInitialized:a().bool.isRequired,userSettings:v.AQ.isRequired,user:a().shape({uid:a().string.isRequired})};const k=(0,i.$j)((function({intervals:e,userSettings:t,user:r,app:n}){return{user:r,isFetching:e.isFetching,isSaving:e.isSaving,userSettings:t,appInitialized:n.initialized}}))(P)},1657:(e,t,r)=>{"use strict";r.d(t,{FG:()=>a,FC:()=>i,AQ:()=>o,ZP:()=>s.a});var n=r(5697),s=r.n(n);const a=s().shape({id:s().string,startTime:s().number.isRequired,endTime:s().number,user:s().string,note:s().string}),i=s().arrayOf(a),o=(s().oneOfType([s().element,s().arrayOf(s().element)]),s().shape({displayNotifications:s().bool.isRequired,displayPreviousIntervals:s().bool.isRequired,displayName:s().string,hoursInWeek:s().number.isRequired}))},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var i=s.apply(null,r);i&&e.push(i)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var o in r)n.call(r,o)&&r[o]&&e.push(o);else e.push(r.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},1012:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var s=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?r.push(t.charAt(s>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,s=0;n<e.length;s=++n%4)0!=s&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<2*s|t.indexOf(e.charAt(n))>>>6-2*s);return r}},e.exports=r},2690:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(3645),s=r.n(n)()((function(e){return e[1]}));s.push([e.id,'.hamburger,.hamburger:before,.hamburger:after{background-color:currentColor;width:100%;height:.2em;transition:transform .2s}.hamburger{position:relative;display:block}.hamburger:before,.hamburger:after{position:absolute;left:0;margin-top:-.6em;content:" "}.hamburger:after{margin-top:.6em}.hamburger--active{transform:rotate(-45deg)}.hamburger--active:before{margin-top:0}.hamburger--active:after{transform:rotate(90deg);margin-top:0}',""]);const a=s},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:(e,t,r)=>{var n,s,a,i,o;n=r(1012),s=r(487).utf8,a=r(8738),i=r(487).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):s.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,l=1732584193,c=-271733879,p=-1732584194,d=271733878,m=0;m<r.length;m++)r[m]=16711935&(r[m]<<8|r[m]>>>24)|4278255360&(r[m]<<24|r[m]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var h=o._ff,g=o._gg,f=o._hh,b=o._ii;for(m=0;m<r.length;m+=16){var v=l,y=c,_=p,S=d;l=h(l,c,p,d,r[m+0],7,-680876936),d=h(d,l,c,p,r[m+1],12,-389564586),p=h(p,d,l,c,r[m+2],17,606105819),c=h(c,p,d,l,r[m+3],22,-1044525330),l=h(l,c,p,d,r[m+4],7,-176418897),d=h(d,l,c,p,r[m+5],12,1200080426),p=h(p,d,l,c,r[m+6],17,-1473231341),c=h(c,p,d,l,r[m+7],22,-45705983),l=h(l,c,p,d,r[m+8],7,1770035416),d=h(d,l,c,p,r[m+9],12,-1958414417),p=h(p,d,l,c,r[m+10],17,-42063),c=h(c,p,d,l,r[m+11],22,-1990404162),l=h(l,c,p,d,r[m+12],7,1804603682),d=h(d,l,c,p,r[m+13],12,-40341101),p=h(p,d,l,c,r[m+14],17,-1502002290),l=g(l,c=h(c,p,d,l,r[m+15],22,1236535329),p,d,r[m+1],5,-165796510),d=g(d,l,c,p,r[m+6],9,-1069501632),p=g(p,d,l,c,r[m+11],14,643717713),c=g(c,p,d,l,r[m+0],20,-373897302),l=g(l,c,p,d,r[m+5],5,-701558691),d=g(d,l,c,p,r[m+10],9,38016083),p=g(p,d,l,c,r[m+15],14,-660478335),c=g(c,p,d,l,r[m+4],20,-405537848),l=g(l,c,p,d,r[m+9],5,568446438),d=g(d,l,c,p,r[m+14],9,-1019803690),p=g(p,d,l,c,r[m+3],14,-187363961),c=g(c,p,d,l,r[m+8],20,1163531501),l=g(l,c,p,d,r[m+13],5,-1444681467),d=g(d,l,c,p,r[m+2],9,-51403784),p=g(p,d,l,c,r[m+7],14,1735328473),l=f(l,c=g(c,p,d,l,r[m+12],20,-1926607734),p,d,r[m+5],4,-378558),d=f(d,l,c,p,r[m+8],11,-2022574463),p=f(p,d,l,c,r[m+11],16,1839030562),c=f(c,p,d,l,r[m+14],23,-35309556),l=f(l,c,p,d,r[m+1],4,-1530992060),d=f(d,l,c,p,r[m+4],11,1272893353),p=f(p,d,l,c,r[m+7],16,-155497632),c=f(c,p,d,l,r[m+10],23,-1094730640),l=f(l,c,p,d,r[m+13],4,681279174),d=f(d,l,c,p,r[m+0],11,-358537222),p=f(p,d,l,c,r[m+3],16,-722521979),c=f(c,p,d,l,r[m+6],23,76029189),l=f(l,c,p,d,r[m+9],4,-640364487),d=f(d,l,c,p,r[m+12],11,-421815835),p=f(p,d,l,c,r[m+15],16,530742520),l=b(l,c=f(c,p,d,l,r[m+2],23,-995338651),p,d,r[m+0],6,-198630844),d=b(d,l,c,p,r[m+7],10,1126891415),p=b(p,d,l,c,r[m+14],15,-1416354905),c=b(c,p,d,l,r[m+5],21,-57434055),l=b(l,c,p,d,r[m+12],6,1700485571),d=b(d,l,c,p,r[m+3],10,-1894986606),p=b(p,d,l,c,r[m+10],15,-1051523),c=b(c,p,d,l,r[m+1],21,-2054922799),l=b(l,c,p,d,r[m+8],6,1873313359),d=b(d,l,c,p,r[m+15],10,-30611744),p=b(p,d,l,c,r[m+6],15,-1560198380),c=b(c,p,d,l,r[m+13],21,1309151649),l=b(l,c,p,d,r[m+4],6,-145523070),d=b(d,l,c,p,r[m+11],10,-1120210379),p=b(p,d,l,c,r[m+2],15,718787259),c=b(c,p,d,l,r[m+9],21,-343485551),l=l+v>>>0,c=c+y>>>0,p=p+_>>>0,d=d+S>>>0}return n.endian([l,c,p,d])})._ff=function(e,t,r,n,s,a,i){var o=e+(t&r|~t&n)+(s>>>0)+i;return(o<<a|o>>>32-a)+t},o._gg=function(e,t,r,n,s,a,i){var o=e+(t&n|r&~n)+(s>>>0)+i;return(o<<a|o>>>32-a)+t},o._hh=function(e,t,r,n,s,a,i){var o=e+(t^r^n)+(s>>>0)+i;return(o<<a|o>>>32-a)+t},o._ii=function(e,t,r,n,s,a,i){var o=e+(r^(t|~n))+(s>>>0)+i;return(o<<a|o>>>32-a)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(o(e,t));return t&&t.asBytes?r:t&&t.asString?i.bytesToString(r):n.bytesToHex(r)}}}]);